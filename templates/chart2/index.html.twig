{% extends 'base.html.twig' %}

{% block title %}Hello ChartController!{% endblock %}

{% block stylesheets %}
    <!-- Load Chart.js stylesheet -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.css">
{% endblock %}

{% block body %}

<div class="col-xl-0">
    <!-- Chart.js Canvas -->
    <canvas id="myChart" style="height: 500px; width: 500px;"></canvas>

    <!-- Load Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

    <!-- Chart.js Script -->
    <script>
        // Get data from PHP variables
        var nbReclamation = {{ nb_reclamation }};
        var nbReponse = {{ nb_reponse }};

        // Create chart data
        var data = {
            datasets: [{
                data: [nbReclamation, nbReponse],
                backgroundColor: ['#ffcc80', '#8DD3BB']
            }],
            labels: ['Reclamations', 'Reponses']
        };

        // Create chart options
        var options = {
            title: {
                display: true,
                text: 'Statistiques',
                fontColor: '#100677',
                fontSize: 20
            },
            legend: {
                display: true,
                position: 'bottom'
            },
            responsive: true,
            maintainAspectRatio: false
        };

        // Create the chart
        var ctx = document.getElementById('myChart').getContext('2d');
        var myPieChart = new Chart(ctx, {
            type: 'pie',
            data: data,
            options: options
        });
    </script>
</div>

{% endblock %}
